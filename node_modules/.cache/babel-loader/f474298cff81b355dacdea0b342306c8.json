{"remainingRequest":"D:\\wte\\wte-admin-vue\\node_modules\\babel-loader\\lib\\index.js!D:\\wte\\wte-admin-vue\\node_modules\\eslint-loader\\index.js??ref--13-0!D:\\wte\\wte-admin-vue\\src\\store\\modules\\user.js","dependencies":[{"path":"D:\\wte\\wte-admin-vue\\src\\store\\modules\\user.js","mtime":1609139317000},{"path":"D:\\wte\\wte-admin-vue\\node_modules\\cache-loader\\dist\\cjs.js","mtime":499162500000},{"path":"D:\\wte\\wte-admin-vue\\node_modules\\babel-loader\\lib\\index.js","mtime":315532800000},{"path":"D:\\wte\\wte-admin-vue\\node_modules\\eslint-loader\\index.js","mtime":499162500000}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:aW1wb3J0ICJjb3JlLWpzL21vZHVsZXMvZXMuZnVuY3Rpb24ubmFtZS5qcyI7CmltcG9ydCAiY29yZS1qcy9tb2R1bGVzL2VzLm9iamVjdC50by1zdHJpbmcuanMiOwppbXBvcnQgImNvcmUtanMvbW9kdWxlcy9lcy5zdHJpbmcudHJpbS5qcyI7CmltcG9ydCB7IGxvZ291dCBhcyBfbG9nb3V0LCBnZXRJbmZvIGFzIF9nZXRJbmZvLCBhZG1pbkxvZ2luIGFzIF9hZG1pbkxvZ2luIH0gZnJvbSAnQC9hcGkvdXNlcic7CmltcG9ydCB7IGdldFRva2VuLCBzZXRUb2tlbiwgcmVtb3ZlVG9rZW4sIHNldENvb2tpZSB9IGZyb20gJ0AvdXRpbHMvYXV0aCc7CmltcG9ydCB7IHJlc2V0Um91dGVyIH0gZnJvbSAnQC9yb3V0ZXInOwoKdmFyIGdldERlZmF1bHRTdGF0ZSA9IGZ1bmN0aW9uIGdldERlZmF1bHRTdGF0ZSgpIHsKICByZXR1cm4gewogICAgdG9rZW46IGdldFRva2VuKCksCiAgICBuYW1lOiAnJywKICAgIGF2YXRhcjogJycsCiAgICB1c2VySWQ6ICcnCiAgfTsKfTsKCnZhciBzdGF0ZSA9IGdldERlZmF1bHRTdGF0ZSgpOwp2YXIgbXV0YXRpb25zID0gewogIFJFU0VUX1NUQVRFOiBmdW5jdGlvbiBSRVNFVF9TVEFURShzdGF0ZSkgewogICAgT2JqZWN0LmFzc2lnbihzdGF0ZSwgZ2V0RGVmYXVsdFN0YXRlKCkpOwogIH0sCiAgU0VUX1RPS0VOOiBmdW5jdGlvbiBTRVRfVE9LRU4oc3RhdGUsIHRva2VuKSB7CiAgICBzdGF0ZS50b2tlbiA9IHRva2VuOwogIH0sCiAgU0VUX05BTUU6IGZ1bmN0aW9uIFNFVF9OQU1FKHN0YXRlLCBuYW1lKSB7CiAgICBzdGF0ZS5uYW1lID0gbmFtZTsKICB9LAogIFNFVF9BVkFUQVI6IGZ1bmN0aW9uIFNFVF9BVkFUQVIoc3RhdGUsIGF2YXRhcikgewogICAgc3RhdGUuYXZhdGFyID0gYXZhdGFyOwogIH0sCiAgU0VUX1VTRVJfSUQ6IGZ1bmN0aW9uIFNFVF9VU0VSX0lEKHN0YXRlLCB1c2VySWQpIHsKICAgIHN0YXRlLnVzZXJJZCA9IHVzZXJJZDsKICB9Cn07CnZhciBhY3Rpb25zID0gewogIC8vIGFkbWluIGxvZ2luCiAgYWRtaW5Mb2dpbjogZnVuY3Rpb24gYWRtaW5Mb2dpbihfcmVmLCB1c2VySW5mbykgewogICAgdmFyIGNvbW1pdCA9IF9yZWYuY29tbWl0OwogICAgdmFyIHVzZXJuYW1lID0gdXNlckluZm8udXNlcm5hbWUsCiAgICAgICAgcGFzc3dvcmQgPSB1c2VySW5mby5wYXNzd29yZDsKICAgIHJldHVybiBuZXcgUHJvbWlzZShmdW5jdGlvbiAocmVzb2x2ZSwgcmVqZWN0KSB7CiAgICAgIF9hZG1pbkxvZ2luKHsKICAgICAgICB1c2VybmFtZTogdXNlcm5hbWUudHJpbSgpLAogICAgICAgIHBhc3N3b3JkOiBwYXNzd29yZAogICAgICB9KS50aGVuKGZ1bmN0aW9uIChyZXNwb25zZSkgewogICAgICAgIGNvbW1pdCgnU0VUX05BTUUnLCByZXNwb25zZS51c2VybmFtZSk7CiAgICAgICAgY29tbWl0KCdTRVRfQVZBVEFSJywgJ2h0dHBzOi8vd3BpbWcud2FsbHN0Y24uY29tL2Y3Nzg3MzhjLWU0ZjgtNDg3MC1iNjM0LTU2NzAzYjRhY2FmZS5naWYnKTsKICAgICAgICBjb21taXQoJ1NFVF9UT0tFTicsIHJlc3BvbnNlLnRva2VuKTsKICAgICAgICBjb21taXQoJ1NFVF9VU0VSX0lEJywgcmVzcG9uc2UudWlkKTsKICAgICAgICBzZXRUb2tlbihyZXNwb25zZS50b2tlbik7CiAgICAgICAgc2V0Q29va2llKCd1c2VySWQnLCByZXNwb25zZS51aWQpOwogICAgICAgIHNldENvb2tpZSgndXNlck5hbWUnLCByZXNwb25zZS51c2VybmFtZSk7CiAgICAgICAgc2V0Q29va2llKCd0b2tlbicsIHJlc3BvbnNlLnRva2VuKTsKICAgICAgICByZXNvbHZlKCk7CiAgICAgIH0pLmNhdGNoKGZ1bmN0aW9uIChlcnJvcikgewogICAgICAgIHJlamVjdChlcnJvcik7CiAgICAgIH0pOwogICAgfSk7CiAgfSwKICAvLyBnZXQgdXNlciBpbmZvCiAgZ2V0SW5mbzogZnVuY3Rpb24gZ2V0SW5mbyhfcmVmMikgewogICAgdmFyIGNvbW1pdCA9IF9yZWYyLmNvbW1pdCwKICAgICAgICBzdGF0ZSA9IF9yZWYyLnN0YXRlOwogICAgcmV0dXJuIG5ldyBQcm9taXNlKGZ1bmN0aW9uIChyZXNvbHZlLCByZWplY3QpIHsKICAgICAgX2dldEluZm8oc3RhdGUudG9rZW4pLnRoZW4oZnVuY3Rpb24gKHJlc3BvbnNlKSB7CiAgICAgICAgdmFyIGRhdGEgPSByZXNwb25zZS5kYXRhOwoKICAgICAgICBpZiAoIWRhdGEpIHsKICAgICAgICAgIHJldHVybiByZWplY3QoJ1ZlcmlmaWNhdGlvbiBmYWlsZWQsIHBsZWFzZSBMb2dpbiBhZ2Fpbi4nKTsKICAgICAgICB9CgogICAgICAgIHZhciBuYW1lID0gZGF0YS5uYW1lLAogICAgICAgICAgICBhdmF0YXIgPSBkYXRhLmF2YXRhcjsKICAgICAgICBjb21taXQoJ1NFVF9OQU1FJywgbmFtZSk7CiAgICAgICAgY29tbWl0KCdTRVRfQVZBVEFSJywgYXZhdGFyKTsKICAgICAgICByZXNvbHZlKGRhdGEpOwogICAgICB9KS5jYXRjaChmdW5jdGlvbiAoZXJyb3IpIHsKICAgICAgICByZWplY3QoZXJyb3IpOwogICAgICB9KTsKICAgIH0pOwogIH0sCiAgLy8gdXNlciBsb2dvdXQKICBsb2dvdXQ6IGZ1bmN0aW9uIGxvZ291dChfcmVmMykgewogICAgdmFyIGNvbW1pdCA9IF9yZWYzLmNvbW1pdCwKICAgICAgICBzdGF0ZSA9IF9yZWYzLnN0YXRlOwogICAgcmV0dXJuIG5ldyBQcm9taXNlKGZ1bmN0aW9uIChyZXNvbHZlLCByZWplY3QpIHsKICAgICAgX2xvZ291dCh7fSkudGhlbihmdW5jdGlvbiAoKSB7CiAgICAgICAgcmVtb3ZlVG9rZW4oKTsgLy8gbXVzdCByZW1vdmUgIHRva2VuICBmaXJzdAoKICAgICAgICByZXNldFJvdXRlcigpOwogICAgICAgIGNvbW1pdCgnUkVTRVRfU1RBVEUnKTsKICAgICAgICByZXNvbHZlKCk7CiAgICAgIH0pLmNhdGNoKGZ1bmN0aW9uIChlcnJvcikgewogICAgICAgIHJlamVjdChlcnJvcik7CiAgICAgIH0pOwogICAgfSk7CiAgfSwKICAvLyByZW1vdmUgdG9rZW4KICByZXNldFRva2VuOiBmdW5jdGlvbiByZXNldFRva2VuKF9yZWY0KSB7CiAgICB2YXIgY29tbWl0ID0gX3JlZjQuY29tbWl0OwogICAgcmV0dXJuIG5ldyBQcm9taXNlKGZ1bmN0aW9uIChyZXNvbHZlKSB7CiAgICAgIHJlbW92ZVRva2VuKCk7IC8vIG11c3QgcmVtb3ZlICB0b2tlbiAgZmlyc3QKCiAgICAgIGNvbW1pdCgnUkVTRVRfU1RBVEUnKTsKICAgICAgcmVzb2x2ZSgpOwogICAgfSk7CiAgfQp9OwpleHBvcnQgZGVmYXVsdCB7CiAgbmFtZXNwYWNlZDogdHJ1ZSwKICBzdGF0ZTogc3RhdGUsCiAgbXV0YXRpb25zOiBtdXRhdGlvbnMsCiAgYWN0aW9uczogYWN0aW9ucwp9Ow=="},{"version":3,"sources":["D:/wte/wte-admin-vue/src/store/modules/user.js"],"names":["logout","getInfo","adminLogin","getToken","setToken","removeToken","setCookie","resetRouter","getDefaultState","token","name","avatar","userId","state","mutations","RESET_STATE","Object","assign","SET_TOKEN","SET_NAME","SET_AVATAR","SET_USER_ID","actions","userInfo","commit","username","password","Promise","resolve","reject","trim","then","response","uid","catch","error","data","resetToken","namespaced"],"mappings":"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","sourcesContent":["import { logout, getInfo, adminLogin } from '@/api/user'\nimport { getToken, setToken, removeToken, setCookie } from '@/utils/auth'\nimport { resetRouter } from '@/router'\n\nconst getDefaultState = () => {\n  return {\n    token: getToken(),\n    name: '',\n    avatar: '',\n    userId: ''\n  }\n}\n\nconst state = getDefaultState()\n\nconst mutations = {\n  RESET_STATE: (state) => {\n    Object.assign(state, getDefaultState())\n  },\n  SET_TOKEN: (state, token) => {\n    state.token = token\n  },\n  SET_NAME: (state, name) => {\n    state.name = name\n  },\n  SET_AVATAR: (state, avatar) => {\n    state.avatar = avatar\n  },\n  SET_USER_ID: (state, userId) => {\n    state.userId = userId\n  }\n}\n\nconst actions = {\n\n  // admin login\n  adminLogin({ commit }, userInfo) {\n    const { username, password } = userInfo\n    return new Promise((resolve, reject) => {\n      adminLogin({ username: username.trim(), password: password }).then(response => {\n        commit('SET_NAME', response.username)\n        commit('SET_AVATAR', 'https://wpimg.wallstcn.com/f778738c-e4f8-4870-b634-56703b4acafe.gif')\n        commit('SET_TOKEN', response.token)\n        commit('SET_USER_ID', response.uid)\n        setToken(response.token)\n        setCookie('userId', response.uid)\n        setCookie('userName', response.username)\n        setCookie('token', response.token)\n        resolve()\n      }).catch(error => {\n        reject(error)\n      })\n    })\n  },\n\n  // get user info\n  getInfo({ commit, state }) {\n    return new Promise((resolve, reject) => {\n      getInfo(state.token).then(response => {\n        const { data } = response\n\n        if (!data) {\n          return reject('Verification failed, please Login again.')\n        }\n\n        const { name, avatar } = data\n\n        commit('SET_NAME', name)\n        commit('SET_AVATAR', avatar)\n        resolve(data)\n      }).catch(error => {\n        reject(error)\n      })\n    })\n  },\n\n  // user logout\n  logout({ commit, state }) {\n    return new Promise((resolve, reject) => {\n      logout({}).then(() => {\n        removeToken() // must remove  token  first\n        resetRouter()\n        commit('RESET_STATE')\n        resolve()\n      }).catch(error => {\n        reject(error)\n      })\n    })\n  },\n\n  // remove token\n  resetToken({ commit }) {\n    return new Promise(resolve => {\n      removeToken() // must remove  token  first\n      commit('RESET_STATE')\n      resolve()\n    })\n  }\n}\n\nexport default {\n  namespaced: true,\n  state,\n  mutations,\n  actions\n}\n\n"]}]}